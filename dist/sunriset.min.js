!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):(t=t||self).sunriset=a()}(this,(function(){"use strict";var t=Math.PI,a=t/180,e=15*a*1.0027379,n=function(t,e,n){var o=24110.5+8640184.813*e/36525+86636.6*n+86400*t;return o/=86400,360*(o-=Math.floor(o))*a},o=function(t){return t>0?1:t<0?-1:0},r=function(t,a){for(var e=t.toString(10),n=e.length,o="",r=0;r<a-n;r++)o+="0";for(var s=0;s<n;s++)o+=e.charAt(s);return o};return function(s,h,i){var M=[0,0],c=[0,0],f=!1,u=!1,l=0,d=0,v=[0,0],m=[0,0,0],g=[0,0,0],p=[0,0,0],_=function(t,n,r,s){var h,i,v,_,w,y,q,T,z,b,x,A,I,j,D=new Array(3);return D[0]=r-m[0]+t*e,D[2]=r-m[2]+t*e+e,D[1]=(D[2]+D[0])/2,g[1]=(g[2]+g[0])/2,y=Math.sin(s*a),v=Math.cos(s*a),q=Math.cos(90.833*a),t<=0&&(p[0]=y*Math.sin(g[0])+v*Math.cos(g[0])*Math.cos(D[0])-q),p[2]=y*Math.sin(g[2])+v*Math.cos(g[2])*Math.cos(D[2])-q,o(p[0])==o(p[2])?p[2]:(p[1]=y*Math.sin(g[1])+v*Math.cos(g[1])*Math.cos(D[1])-q,h=2*p[0]-4*p[1]+2*p[2],(_=(i=-3*p[0]+4*p[1]-p[2])*i-4*h*p[0])<0?p[2]:(((w=(-i+(_=Math.sqrt(_)))/(2*h))>1||w<0)&&(w=(-i-_)/(2*h)),b=t+w+1/120,T=Math.floor(b),z=Math.floor(60*(b-T)),I=D[0]+w*(D[2]-D[0]),j=-Math.cos(g[1])*Math.sin(I),A=v*Math.sin(g[1])-y*Math.cos(g[1])*Math.cos(I),(x=Math.atan2(j,A)/a)<0&&(x+=360),p[0]<0&&p[2]>0&&(M[0]=T,M[1]=z,l=x,f=!0),p[0]>0&&p[2]<0&&(c[0]=T,c[1]=z,d=x,u=!0),p[2]))},w=function(a,e){var n,o,r,s,h,i;o=.779072+.00273790931*a,o=2*(o-=Math.floor(o))*t,n=.993126+.0027377785*a,n=2*(n-=Math.floor(n))*t,h=.39785*Math.sin(o),h-=.01*Math.sin(o-n),h+=.00333*Math.sin(o+n),h-=21e-5*e*Math.sin(o),s=1-.03349*Math.cos(n),s-=14e-5*Math.cos(2*o),s+=8e-5*Math.cos(o),i=-1e-4-.04129*Math.sin(2*o),i+=.03211*Math.sin(n),i+=.00104*Math.sin(2*o-n),i-=35e-5*Math.sin(2*o+n),r=(i-=8e-5*e*Math.sin(n))/Math.sqrt(s-h*h),v[0]=o+Math.atan(r/Math.sqrt(1-r*r)),r=h/Math.sqrt(s),v[1]=Math.atan(r/Math.sqrt(1-r*r))},y=Math.round(s.getTimezoneOffset()/60),q=function(t){var a,e,n,o=t.getFullYear(),r=t.getMonth()+1,s=t.getDate();return n=!(o<1583),1!=r&&2!=r||(o-=1,r+=12),a=Math.floor(o/100),e=n?2-a+Math.floor(a/4):0,Math.floor(365.25*(o+4716))+Math.floor(30.6001*(r+1))+s+e-1524.5}(s)-2451545;if(o(y)===o(i)&&y)return{error:"Invalid input data."};var T=y/24,z=q/36525+1,b=n(i/=360,q,T);w(q+=T,z);var x=v[0],A=v[1];w(++q,z);var I=v[0],j=v[1];I<x&&(I+=2*t),m[0]=x,g[0]=A;for(var D=0;D<24;++D)m[2]=x+(D+1)*(I-x)/24,g[2]=A+(D+1)*(j-A)/24,p[2]=_(D,0,b,h),m[0]=m[2],g[0]=g[2],p[0]=p[2];var F={},O=function(t,a,e){var n=F[t]={raw_time:a,angle:e};n.time=r(a[0],2)+":"+r(a[1],2),n.formatted="".concat(n.raw_time[0],":").concat(n.raw_time[1],", az = ").concat(n.angle,"Â°")};return O("sunrise",M,l),O("sunset",c,d),f||u?f?u||(F.special_message="The sun doesn't set."):F.special_message="The sun doesn't rise.":p[2]<0?F.special_message="The sun is under the horizon the whole day.":F.special_message="The sun is above the horizon the whole day.",F.date=s,F.coordinates=[h,i],F}}));
